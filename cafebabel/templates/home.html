{% extends "base.html" %}
{% from "_meta-macro.html" import meta %}
{% from "articles/macros.html" import card %}
{% from "_homepage-macro.html" import series, latest with context %}

{% block metas %}
  {{ meta('name=description', 'Cafébabel is the first ever participatory magazine for and by European millennials. Join the party!') }}
  {{ meta('name=author', 'Cafébabel') }}
{% endblock %}

{% block metas_social %}
  {{ meta('property=og:url', request.url) }}
  {{ meta('property=og:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('property=og:title', self.meta_title()) }}
  {{ meta('property=og:type', 'website') }}
  {{ meta('property=og:description', 'Cafébabel is the first ever participatory magazine for and by European millennials. Join the party!') }}
  {{ meta('property=og:site_name', 'Cafébabel') }}
  {{ meta('property=og:locale', current_language) }}
  {{ meta('name=twitter:card', 'summary') }}
  {{ meta('name=twitter:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('name=twitter:title', self.meta_title()) }}
  {{ meta('name=twitter:description', 'Cafébabel is the first ever participatory magazine for and by European millennials. Join the party!') }}
  {{ meta('name=twitter:url', request.url) }}
{% endblock %}

{% block body_class %}home{% endblock %}
{% block body %}
  <section class=editors-pick>
    {% set tag_editors_pick, articles_editors_pick = articles_for_tag('editors-pick', limit=1) %}
    {% for article_editors_pick in articles_editors_pick %}
      {{ card(article_editors_pick, image_dimensions=config.RESIZE_SIZE_ARTICLE_COVER) }}
    {% endfor %}
  </section>
  <section class=categories>
    <h2>Sections</h2>
    {% for category in categories|shuffle %}
      <a href={{ category.detail_url }} class="section-link {{ category.slug }}">{{ category.name }}</a>
    {% endfor %}
  </section>
  {{ latest("latest1", 3) }}
  {{ series("meet-my-hood", 2) }}
  {{ latest("latest2", 3) }}
  {{ series("network", 0) }}
  {{ latest("latest3", 3) }}
  {{ series("voglio-mangiare-cosi", 2) }}
  {{ latest("latest4", 3) }}
  <div id=under-construction>
    <div class=modal>
    <button title="close this window"></button>
      <h2>Welcome to the brand new Cafébabel!</h2>
      <p>
        We're still under construction.<img src={{ url_for('static', filename='img/emoji/emoji-hammer.png') }} alt="hammer emoji"><br>
        But if you want to take a look <img src={{ url_for('static', filename='img/emoji/emoji-eyes.png') }} alt="eyes emoji"> around
        then feel free to login and send us your feedback here:<br>
        <a href=mailto:&#119;&#101;&#098;&#109;&#097;&#115;&#116;&#101;&#114;&#064;&#099;&#097;&#102;&#101;&#098;&#097;&#098;&#101;&#108;&#046;&#099;&#111;&#109;>webmaster [at] cafebabel.com</a>
      </p>
      <p>
        The Cafébabel team <img src={{ url_for('static', filename='img/emoji/emoji-smile.png') }} alt="smile emoji">
      </p>
    </div>
  </div>
  <script>
    if (!sessionStorage.getItem('popup')) {
      const underConstructionPopUp = document.querySelector('#under-construction')
      underConstructionPopUp.classList.add('show')
      underConstructionPopUp.querySelector('button').addEventListener('click', () => {
        underConstructionPopUp.classList.remove('show')
      })
      sessionStorage.setItem('popup', 'true');
    }
  </script>
{% endblock %}
