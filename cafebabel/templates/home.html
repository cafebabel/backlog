{% extends "base.html" %}
{% from "_meta-macro.html" import meta %}
{% from "articles/macros.html" import card %}

{% block metas %}
  {{ meta('name=description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=author', 'Cafébabel') }}
{% endblock %}

{% block metas_social %}
  {{ meta('property=og:url', request.url) }}
  {{ meta('property=og:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('property=og:title', self.meta_title()) }}
  {{ meta('property=og:type', 'website') }}
  {{ meta('property=og:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('property=og:site_name', 'Cafébabel') }}
  {{ meta('property=og:locale', current_language) }}
  {{ meta('name=twitter:card', 'summary') }}
  {{ meta('name=twitter:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('name=twitter:title', self.meta_title()) }}
  {{ meta('name=twitter:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=twitter:url', request.url) }}
{% endblock %}

{% block body_class %}home{% endblock %}
{% block body %}
  <h2>Editor's pick</h2>
  {% set article_editors_pick = articles_for_tag('editors-pick', limit=1) %}
  {% if article_editors_pick %}
    {{ card(article_editors_pick) }}
  {% endif %}

  <h2>Sections</h2>
{% for category in categories|shuffle %}
  <a href={{ category.detail_url }} class="section-link {{ category.slug }}">{{ category.name }}</a>
{% endfor %}

  <h2>Meet My Hood</h2>
  {% set articles_meet_my_hood = articles_for_tag('meet-my-hood', limit=2) %}
  {% for article_meet_my_hood in articles_meet_my_hood %}
    {{ card(article_meet_my_hood) }}
  {% endfor %}

{% if articles %}
  <h2>Recently published</h2>
  {% set article_network = articles_for_tag('network', limit=1) %}
  {% for article in articles %}
    {% if article not in (article_editors_pick, article_network) and article not in articles_meet_my_hood %}
      {{ card(article) }}
      {% if loop.index == 3 %}
        <h2>Network</h2>
        {% if article_network %}
          {{ card(article_network) }}
        {% endif %}
      {% endif %}
    {% endif %}
  {% endfor %}
{% endif %}
{% endblock %}
