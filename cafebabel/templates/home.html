{% extends "base.html" %}
{% from "_meta-macro.html" import meta %}
{% from "articles/macros.html" import card %}

{% block metas %}
  {{ meta('name=description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=author', 'Cafébabel') }}
{% endblock %}

{% block metas_social %}
  {{ meta('property=og:url', request.url) }}
  {{ meta('property=og:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('property=og:title', self.meta_title()) }}
  {{ meta('property=og:type', 'website') }}
  {{ meta('property=og:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('property=og:site_name', 'Cafébabel') }}
  {{ meta('property=og:locale', current_language) }}
  {{ meta('name=twitter:card', 'summary') }}
  {{ meta('name=twitter:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('name=twitter:title', self.meta_title()) }}
  {{ meta('name=twitter:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=twitter:url', request.url) }}
{% endblock %}

{% block body_class %}home{% endblock %}
{% block body %}
{% if articles %}
  {{ card(articles|first) }}
{% endif %}

  <h2>Sections</h2>
{% for category in categories|shuffle %}
  <a href={{ category.detail_url }} class="section-link {{ category.slug }}">{{ category.name }}</a>
{% endfor %}

{% if articles|length > 1 %}
  <h2>Recently published</h2>
  {% for article in articles[1:] %}
    {{ card(article) }}
  {% endfor %}
{% endif %}
  <div id=under-construction>
    <div class=modal>
    <button></button>
      <h2>Welcome to the brand new Cafébabel!</h2>
      <p>
        We're still under construction.<img src={{ url_for('static', filename='img/emoji/emoji-hammer.png') }} alt="hammer emoji"><br>
        But if you want to take a look <img src={{ url_for('static', filename='img/emoji/emoji-eyes.png') }} alt="eyes emoji"> around
        then feel free to login and send us your feedback here:<br>
        <a href=mailto:webmaster@cafebabel.com>webmaster@cafebabel.com</a>
      </p>
      <p>
        The Cafébabel team <img src={{ url_for('static', filename='img/emoji/emoji-smile.png') }} alt="smile emoji">
      </p>
    </div>
  </div>
  <script>
    if (sessionStorage.getItem('popup') !== 'true') {
      const underConstructionPopUp = document.querySelector('#under-construction')
      underConstructionPopUp.classList.add('show')
      underConstructionPopUp.querySelector('button').addEventListener('click', event => {
        event.preventDefault()
        underConstructionPopUp.classList.remove('show')
      })
      sessionStorage.setItem('popup', 'true');
    }
  </script>
{% endblock %}
