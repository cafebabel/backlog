{% extends "base.html" %}
{% from "_meta-macro.html" import meta %}
{% from "articles/macros.html" import card %}
{% from "_homepage-macro.html" import series, latest, participation with context %}

{% block metas %}
  {{ meta('name=description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=author', 'Cafébabel') }}
{% endblock %}

{% block metas_social %}
  {{ meta('property=og:url', request.url) }}
  {{ meta('property=og:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('property=og:title', self.meta_title()) }}
  {{ meta('property=og:type', 'website') }}
  {{ meta('property=og:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('property=og:site_name', 'Cafébabel') }}
  {{ meta('property=og:locale', current_language) }}
  {{ meta('name=twitter:card', 'summary') }}
  {{ meta('name=twitter:image', url_for('static', filename='img/cafebabel-thumbnail-default.jpg')) }}
  {{ meta('name=twitter:title', self.meta_title()) }}
  {{ meta('name=twitter:description', 'Cafébabel is the first European participatory magazine made for young Europeans across borders.') }}
  {{ meta('name=twitter:url', request.url) }}
{% endblock %}

{% block body_class %}home{% endblock %}
{% block body %}
  <section class=editors-pick>
    {% set tag_editors_pick, articles_editors_pick = articles_for_tag('editors-pick', limit=1) %}
    {% for article_editors_pick in articles_editors_pick %}
      {{ card(article_editors_pick, image_dimensions=config.RESIZE_SIZE_ARTICLE_COVER) }}
    {% endfor %}
  </section>
  {{ latest("latest1", 8) }}
  {{ series("meet-my-hood", 2, 'small description here', 'See all MMH bitches') }}
  <section class=categories>
    <h2>Sections</h2>
    {% for category in categories|shuffle %}
      <a href={{ category.detail_url }} class="section-link tag-{{ category.slug }}">{{ category.name }}</a>
      {% set tag_category, articles_category = articles_for_tag(category.slug, 3) %}
      {% if articles_category %}
        <div class=category-article><div class=category-article-column>
        {% for article_category in articles_category %}
          {% if loop.index == 2 %}
            </div><div class=category-article-column>
          {% endif %}
          {{ card(article_category) }}
        {% endfor %}
          </div></div>
      {% endif %}
    {% endfor %}
  </section>
  {{ series("voglio-mangiare-cosi", 2, 'I like to eat', 'See more VMC') }}
  {{ participation('participate', 'Participate', 'Hey wanna write for us? C\'mon', 'http://localhost:5000/en/article/proposal/new/', 'Come come come!') }}
  {{ series("borderline", 1) }}
  {{ participation('donate', 'Wanna help us Cafébabel?', '', 'https://www.okpal.com/europe-in-real-life-by-cafebabel', 'Money money') }}
  {{ series("network", 0) }}
  <div id=under-construction>
    <div class=modal>
    <button title="close this window"></button>
      <h2>Welcome to the brand new Cafébabel!</h2>
      <p>
        We're still under construction.<img src={{ url_for('static', filename='img/emoji/emoji-hammer.png') }} alt="hammer emoji"><br>
        But if you want to take a look <img src={{ url_for('static', filename='img/emoji/emoji-eyes.png') }} alt="eyes emoji"> around
        then feel free to login and send us your feedback here:<br>
        <a href=mailto:&#119;&#101;&#098;&#109;&#097;&#115;&#116;&#101;&#114;&#064;&#099;&#097;&#102;&#101;&#098;&#097;&#098;&#101;&#108;&#046;&#099;&#111;&#109;>webmaster [at] cafebabel.com</a>
      </p>
      <p>
        The Cafébabel team <img src={{ url_for('static', filename='img/emoji/emoji-smile.png') }} alt="smile emoji">
      </p>
    </div>
  </div>
  <script>
    if (!sessionStorage.getItem('popup')) {
      const underConstructionPopUp = document.querySelector('#under-construction')
      underConstructionPopUp.classList.add('show')
      underConstructionPopUp.querySelector('button').addEventListener('click', () => {
        underConstructionPopUp.classList.remove('show')
      })
      sessionStorage.setItem('popup', 'true');
    }
  </script>
{% endblock %}
{% block class_partners %}class=partners{% endblock %}
{% block partners %}
  <div id=partners>
    <ul>
      <li><a href=https://ec.europa.eu/ title="European Commission">European Commission</a></li>
      <li><a href=http://europa.eu/ title="European Union">European Union</a></li>
      <li><a href=http://www.sports.gouv.fr/ title="Ministère des sports">Ministère des sports</a></li>
      <li><a href=https://www.diplomatie.gouv.fr/en/ title="Ministère des affaires étrangères et européenne">Ministère des affaires étrangères et européenne</a></li>
      <li><a href=http://www.culture.gouv.fr/ title="Ministère de la culture">Ministère de la culture</a></li>
      <li><a href=http://fondationhippocrene.eu/ title="Fondation Hippocrène">Fondation Hippocrène</a></li>
      <li><a href=https://www.ofaj.org/ title="OFAJ">OFAJ</a></li>
      <li><a href=https://www.goethe.de/ title=Goethe Institut">Goethe Institut</a></li>
      <li><a href=https://www.bpb.de/ title=Bundeszentrale für politische Bildung">Bundeszentrale für politische Bildung</a></li>
    </ul>
  </div>
{% endblock %}
