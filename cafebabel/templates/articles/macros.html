{% from "users/macros.html" import default_profile_picture without context %}

{%- macro article_meta(article) -%}
  <p>
    <span>Published on <time pubdate="{{ article.creation_date.date() }}">{{ article.creation_date.date() }}</time></span>
    â€” by {% if article.author.profile.has_image %}
      <img src={{ article.author.profile.image_url }} alt="Picture of {{ article.author }}">
    {% else %}
      {{ default_profile_picture() }}
    {% endif %}
    {{ article.author }}<br>
    {% if article.category %}
    in category {{ article.category }}<br>
    {% endif %}
    Reading time: {{ article.body|reading_time }} min
  </p>
{%- endmacro %}

{%- macro tags_fields(tags, article=None) -%}
  <div class=tags>
    <label for=tag-1>Tags</label>
    <div class=tag-container><input name=tag-new><button class=add>+</button></div>
    {% if article and article.tags %}
    {% set count = 1 %}
      {% for tag in tags['en'] %}
        <button class=remove>+</button><input list=tags name=tag-{{ count }} value={{ article.tags.name }}>
        {% set count = count + 1 %}
      {% endfor %}
    {% endif %}
    <datalist id=tags>
      {% for tag in tags['en'] %}
        <option value="{{ tag.name }}">
      {% endfor %}
    </datalist>
  </div>
{%- endmacro %}
