{% extends "base.html" %}
{% from "_macro-extra-js.html" import extra_js without context %}

{% block extra_js %}
  {{ extra_js(url_for('static', filename='js/noise.js')) }}
  {{ extra_js(url_for('static', filename='js/image-preview.js')) }}
{% endblock %}

{% block body_class %}tag-page-edit{% endblock %}
{% block body %}
<form method=post action={{ url_for('tags.edit', slug=tag.slug) }} enctype=multipart/form-data>
  <input type=hidden name=slug value="{{ tag.slug }}">
  <div class=file>
    <label for=image>Image</label>
    {% if tag.image_filename %}
      <output><img src={{ tag.image_url }} alt="Image for {{ tag.name }}"></output>
      <div class=checkbox>
        <label for=delete-image>Delete image</label>
        <input type=checkbox name=delete-image id=delete-image value=1>
      </div>
    {% else %}
      <canvas class=noise></canvas>
      <output></output>
    {% endif %}
    <label for=image>Click here to add a cover picture or Drag & drop your pic here <small>Recommended file size: 1200x467px, less than 1Mo</small></label>
    <input type=file id=image name=image>
  </div>
  <div class=edit-tag-detail-container>
    <h1>{{ tag.name }}</h1>
    <div class=textarea>
      <label for=summary>Summary</label>
      <textarea id=summary name=summary>{{ tag.summary }}</textarea>
    </div>
    <input type=submit value=Save>
  </div>
</form>
{% endblock %}
