<!doctype html>
<html lang={{ current_language }}>
<meta charset=utf-8>
<meta name=viewport content="width=device-width, minimum-scale=1, initial-scale=1, shrink-to-fit=no">
<title>{% block meta_title %}pan-European news, features and opinions{% endblock %} – Cafebabel</title>

{% from "_social-networks-macro.html" import social_networks with context %}

{% block metas %}{% endblock %}

{% block metas_social %}{% endblock %}

<link rel=stylesheet href={{ url_for('static', filename='css/styles.css') }}>
{% block extra_head %}{% endblock %}

<body class="{% block body_class %}{% endblock %}">

<button class="menu main-menu"></button>

<nav>
  <ul>
    {% if current_user.is_authenticated %}
        <li><a href={{ current_user.detail_url }}>Profile</a></li>
        <li><a href={{ url_for('security.logout') }}>Log out</a></li>
        <li><a href={{ url_for('security.change_password') }}>Change password</a></li>
    {% else %}
      {% if security.registerable or security.recoverable or security.confirmable %}
        <li><a href="{{ url_for_security('login') }}{% if 'next' in request.args %}?next={{ request.args.next|urlencode }}{% endif %}">{{ _('Login') }}</a></li>
        {% if security.registerable %}
        <li><a href="{{ url_for_security('register') }}{% if 'next' in request.args %}?next={{ request.args.next|urlencode }}{% endif %}">{{ _('Register') }}</a><br/></li>
        {% endif %}
        {% if security.recoverable %}
        <li><a href="{{ url_for_security('forgot_password') }}">{{ _('Forgot password') }}</a><br/></li>
        {% endif %}
        {% if security.confirmable %}
        <li><a href="{{ url_for_security('send_confirmation') }}">{{ _('Confirm account') }}</a></li>
        {% endif %}
      {% endif %}
    {% endif %}
    <li><a href={{ lang_url_for('proposals.create') }}>Suggest an article</a></li>
    {% if current_user.has_role('editor') %}
      <li><a href={{ lang_url_for('drafts.create') }}>Write an article</a></li>
      <li><a href={{ lang_url_for('drafts.list') }}>View existing drafts</a></li>
    {% endif %}
    <li><a href={{ lang_url_for('articles.to_translate') }}>Translate an article</a></li>
    <li>
      {{ social_networks() }}
    </li>
  </ul>
</nav>

<button class="menu language">{{ current_language }}</button>

<nav>
  <ul>
    {% for lang_code, lang_label in get_languages() %}
      {% if lang_code != current_language %}
        {% set lang_url = url_for('cores.home_lang', lang=lang_code) %}
        {% if article and article.id %}
          {% set lang_url = article.get_published_translation_url(lang_code) or lang_url %}
        {% elif tag and tag.slug in get_categories_slugs() %}
          {% set lang_url = url_for('tags.detail', slug=tag.slug, lang=lang_code) %}
        {% endif %}
        <li><a href={{ lang_url }}>{{ lang_code|upper }}</a></li>
      {% endif %}
    {% endfor %}
  </ul>
</nav>

<a href={{ lang_url_for('proposals.create') }} id=participate>Participate</a>
<a href={{ lang_url_for('articles.to_translate') }} id=translate>Translate</a>

<nav id=social-networks>
  {{ social_networks(with_linkedin=False) }}
</nav>
{% include "security/_messages.html" %}

<main>
  <a href={{ lang_url_for('cores.home_lang') }} class=logo>
    <img src={{ url_for('static', filename='img/logo-cafebabel.svg') }} alt="logo Cafébabel">
  </a>
  <div id=content>
{% block body %}{% endblock %}
  </div>
  <nav id=static-pages-links>
    {% set static_pages = static_pages_for(current_language) %}
    <nav>
      <ul>
        <li><a href={{ static_pages.get('about', '#') }}>About</a></li>
        <li><a href={{ static_pages.get('contact', '#') }}>Contact</a></li>
      </ul>
      <ul>
        <li><a href={{ static_pages.get('editorial-vision', '#') }}>Editorial vision</a></li>
        <li><a href={{ static_pages.get('faq', '#') }}>FAQ</a></li>
      </ul>
      <ul>
        <li><a href={{ static_pages.get('terms-and-conditions', '#') }}>Terms and conditons</a></li>
        <li>
          {{ social_networks() }}
        </li>
      </ul>
    </nav>
  </nav>
</main>

<footer>
  <p>© Cafébabel — {{ get_year() }}</p>
</footer>
<div id=preloader-layer>
    <img src={{ url_for('static', filename='img/preloader-A.gif') }} alt="preloader coffee grinder">
</div>

<script src={{ url_for('static', filename='js/utils.js') }}></script>
<script src={{ url_for('static', filename='js/script.js') }}></script>
{% block extra_js %}{% endblock %}
</html>
